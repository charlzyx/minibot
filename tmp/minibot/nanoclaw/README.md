# NanoClaw - è½»é‡çº§ Claude åŠ©æ‰‹

## ğŸ“– é¡¹ç›®æ¦‚è¿°

NanoClaw æ˜¯ä¸€ä¸ªè½»é‡çº§ã€å®‰å…¨çš„ AI åŠ©æ‰‹æ¡†æ¶ï¼ŒåŸºäº Anthropic Claude æ¨¡å‹æ„å»ºã€‚å®ƒè®¾è®¡ç”¨äºåœ¨å®¹å™¨ä¸­è¿è¡Œï¼Œæä¾›éš”ç¦»å’Œå®‰å…¨çš„æ‰§è¡Œç¯å¢ƒã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **è½»é‡çº§**: æœ€å°åŒ–ä¾èµ–ï¼Œå¿«é€Ÿå¯åŠ¨
- ğŸ”’ **å®‰å…¨**: å®¹å™¨éš”ç¦»ï¼Œé root ç”¨æˆ·è¿è¡Œ
- ğŸ§  **æ™ºèƒ½**: ä½¿ç”¨ Claude 3.5 Sonnet æ¨¡å‹
- ğŸ’¾ **è®°å¿†**: æ”¯æŒå¯¹è¯å†å²å’Œé•¿æœŸè®°å¿†
- ğŸ”§ **å¯æ‰©å±•**: æ’ä»¶åŒ–çš„æŠ€èƒ½ç³»ç»Ÿ
- ğŸ“¦ **å®¹å™¨åŒ–**: Docker æ”¯æŒï¼Œæ˜“äºéƒ¨ç½²

## ğŸ—ï¸ æ¶æ„åˆ†æ

### åŸå§‹ NanoClaw æ¶æ„

åŸºäºå¯¹ `qwibitai/nanoclaw` ä»£ç çš„åˆ†æ:

```
nanoclaw/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # ä¸»å…¥å£ï¼Œåè°ƒæ‰€æœ‰ç»„ä»¶
â”‚   â”œâ”€â”€ config.ts             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ container-runner.ts   # å®¹å™¨è¿è¡Œå™¨
â”‚   â”œâ”€â”€ db.ts                 # SQLite æ•°æ®åº“
â”‚   â”œâ”€â”€ ipc.ts                # è¿›ç¨‹é—´é€šä¿¡
â”‚   â”œâ”€â”€ task-scheduler.ts     # ä»»åŠ¡è°ƒåº¦
â”‚   â”œâ”€â”€ whatsapp-auth.ts      # WhatsApp è®¤è¯
â”‚   â”œâ”€â”€ router.ts             # æ¶ˆæ¯è·¯ç”±
â”‚   â”œâ”€â”€ group-queue.ts        # ç¾¤ç»„é˜Ÿåˆ—
â”‚   â””â”€â”€ channels/             # é€šä¿¡æ¸ é“
â”‚       â”œâ”€â”€ whatsapp/
â”‚       â”œâ”€â”€ discord/
â”‚       â””â”€â”€ telegram/
â”œâ”€â”€ container/
â”‚   â”œâ”€â”€ Dockerfile            # å®¹å™¨é•œåƒå®šä¹‰
â”‚   â”œâ”€â”€ agent-runner/         # ä»£ç†è¿è¡Œå™¨
â”‚   â””â”€â”€ skills/               # æŠ€èƒ½æ’ä»¶
â””â”€â”€ docs/                     # æ–‡æ¡£
```

### å…³é”®ç»„ä»¶è¯´æ˜

1. **å®¹å™¨è¿è¡Œå™¨ (container-runner.ts)**
   - ç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸ
   - å¤„ç†èµ„æºé™åˆ¶
   - å®‰å…¨çš„æ–‡ä»¶æŒ‚è½½
   - IPC é€šä¿¡

2. **æ•°æ®åº“ (db.ts)**
   - SQLite æŒä¹…åŒ–å­˜å‚¨
   - æ¶ˆæ¯å†å²
   - ç”¨æˆ·è®°å¿†
   - ä»»åŠ¡çŠ¶æ€

3. **IPC é€šä¿¡ (ipc.ts)**
   - ä¸»è¿›ç¨‹ä¸å®¹å™¨é€šä¿¡
   - JSON æ¶ˆæ¯ä¼ é€’
   - æ–‡ä»¶ç³»ç»Ÿ IPC

4. **ä»»åŠ¡è°ƒåº¦ (task-scheduler.ts)**
   - Cron è¡¨è¾¾å¼æ”¯æŒ
   - å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
   - æ—¶åŒºå¤„ç†

## ğŸ“¦ ç®€åŒ–å®ç° (simplified/)

ä¸ºäº†å­¦ä¹ å’Œå¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬:

### æ–‡ä»¶ç»“æ„

```
simplified/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts             # ç®€åŒ–ç‰ˆä¸»ç¨‹åº
â”œâ”€â”€ Dockerfile                # Docker é•œåƒ
â”œâ”€â”€ docker-compose.yml        # Compose é…ç½®
â”œâ”€â”€ package.json             # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ build.sh                 # æ„å»ºè„šæœ¬
â””â”€â”€ run.sh                   # è¿è¡Œè„šæœ¬
```

### ç®€åŒ–ç‰ˆç‰¹æ€§

- âœ… Claude API é›†æˆ
- âœ… åŸºç¡€æŠ€èƒ½ç³»ç»Ÿ (echo, help, time)
- âœ… å¯¹è¯è®°å¿†
- âœ… Docker å®¹å™¨åŒ–
- âœ… é root ç”¨æˆ·è¿è¡Œ
- â³ æš‚æœªå®ç°: é€šä¿¡æ¸ é“ã€ä»»åŠ¡è°ƒåº¦ã€æ•°æ®åº“æŒä¹…åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker (>= 20.10)
- Node.js (>= 20) - ç”¨äºæœ¬åœ°å¼€å‘
- Anthropic API Key

### 1. è·å– API Key

è®¿é—® [Anthropic Console](https://console.anthropic.com/) è·å– API å¯†é’¥ã€‚

### 2. æ„å»ºé•œåƒ

```bash
cd simplified
chmod +x build.sh run.sh

# æ„å»ºé•œåƒ
./build.sh
```

### 3. è¿è¡Œå®¹å™¨

```bash
# è®¾ç½® API Key å¹¶è¿è¡Œ
export ANTHROPIC_API_KEY=sk-ant-xxxxx
./run.sh
```

æˆ–ä½¿ç”¨ docker-compose:

```bash
# åˆ›å»º .env æ–‡ä»¶
echo "ANTHROPIC_API_KEY=sk-ant-xxxxx" > .env

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### 4. äº¤äº’ä½¿ç”¨

å®¹å™¨å¯åŠ¨åï¼Œä½ å¯ä»¥:

```
ğŸ¤– NanoClaw initialized
ğŸ“ Available skills: echo, help, time

Type your message or 'exit' to quit:

> ä½ å¥½
ğŸ’¬ NanoClaw: ä½ å¥½! æˆ‘æ˜¯ NanoClaw, ä¸€ä¸ª AI åŠ©æ‰‹ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—?

> time
ğŸ”§ Executing skill: time
2024-02-14T12:00:00.000Z

> help
ğŸ”§ Executing skill: help
- echo: Echo back input
- help: List available skills
- time: Get current time

> exit
ğŸ‘‹ Goodbye!
```

## ğŸ”§ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡

| å˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|--------|------|
| `ANTHROPIC_API_KEY` | - | Anthropic API å¯†é’¥ (å¿…éœ€) |
| `ASSISTANT_NAME` | NanoClaw | åŠ©æ‰‹åç§° |
| `MODEL` | claude-3-5-sonnet-20241022 | ä½¿ç”¨çš„æ¨¡å‹ |
| `MAX_TOKENS` | 4096 | æœ€å¤§è¾“å‡º token æ•° |
| `NODE_ENV` | production | Node ç¯å¢ƒ |

### Docker èµ„æºé™åˆ¶

åœ¨ `docker-compose.yml` ä¸­é…ç½®:

```yaml
deploy:
  resources:
    limits:
      cpus: '2'      # CPU é™åˆ¶
      memory: 1G      # å†…å­˜é™åˆ¶
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

1. **é root ç”¨æˆ·**: å®¹å™¨ä»¥ `nanoclaw` (UID 1000) ç”¨æˆ·è¿è¡Œ
2. **åªè¯»æ–‡ä»¶ç³»ç»Ÿ**: ä¸»è¦æ–‡ä»¶ç³»ç»Ÿè®¾ç½®ä¸ºåªè¯»
3. **èµ„æºé™åˆ¶**: CPU å’Œå†…å­˜ä½¿ç”¨é™åˆ¶
4. **å®‰å…¨é€‰é¡¹**: `no-new-privileges` é˜²æ­¢æƒé™æå‡

## ğŸ“š å­¦ä¹ è¦ç‚¹

### ä» NanoClaw ä¸­å­¦åˆ°çš„å…³é”®æ¦‚å¿µ

1. **å®¹å™¨åŒ–éš”ç¦»**: æ¯ä¸ªä»»åŠ¡åœ¨ç‹¬ç«‹å®¹å™¨ä¸­è¿è¡Œ
2. **å®‰å…¨æŒ‚è½½**: ä¸¥æ ¼çš„æŒ‚è½½ç™½åå•æœºåˆ¶
3. **IPC é€šä¿¡**: é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œè¿›ç¨‹é—´é€šä¿¡
4. **æŠ€èƒ½ç³»ç»Ÿ**: å¯æ‰©å±•çš„æ’ä»¶æ¶æ„
5. **ä»»åŠ¡è°ƒåº¦**: åŸºäº cron çš„å®šæ—¶ä»»åŠ¡

### ä»£ç ç»„ç»‡åŸåˆ™

- æ¨¡å—åŒ–è®¾è®¡
- é…ç½®ä¸ä»£ç åˆ†ç¦»
- å®Œå–„çš„ç±»å‹å®šä¹‰ (TypeScript)
- å…¨é¢çš„é”™è¯¯å¤„ç†
- è¯¦ç»†çš„æ—¥å¿—è®°å½•

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æŠ€èƒ½

ç¼–è¾‘ `src/index.ts`:

```typescript
const skills: Skill[] = [
  // ... ç°æœ‰æŠ€èƒ½
  {
    name: 'myskill',
    description: 'My custom skill',
    execute: async (args: any) => {
      // å®ç°ä½ çš„é€»è¾‘
      return 'Result';
    },
  },
];
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ (ä½¿ç”¨ tsx)
npm run dev

# æ„å»º
npm run build

# è¿è¡Œæ„å»ºç‰ˆæœ¬
npm start
```

### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯• (åŸå§‹é¡¹ç›®åŒ…å«)
npm test

# ç±»å‹æ£€æŸ¥
npm run typecheck
```

## ğŸ“ˆ æ‰©å±•æ–¹å‘

### çŸ­æœŸç›®æ ‡

1. æ·»åŠ æ•°æ®åº“æŒä¹…åŒ– (SQLite)
2. å®ç°æ–‡ä»¶ç³»ç»Ÿæ“ä½œæŠ€èƒ½
3. æ·»åŠ  Web ç•Œé¢
4. æ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡

### é•¿æœŸç›®æ ‡

1. é›†æˆé€šä¿¡æ¸ é“ (WhatsApp, Discord)
2. å®ç°ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
3. æ·»åŠ æ›´å¤šå†…ç½®æŠ€èƒ½
4. æ”¯æŒå¤šè¯­è¨€

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

## ğŸ“„ è®¸å¯è¯

MIT License - ä¸åŸå§‹ NanoClaw é¡¹ç›®ä¿æŒä¸€è‡´

## ğŸ”— ç›¸å…³é“¾æ¥

- [åŸå§‹ NanoClaw](https://github.com/qwibitai/nanoclaw)
- [Anthropic API æ–‡æ¡£](https://docs.anthropic.com/)
- [Claude Skills](https://github.com/anthropics/claude-skills)

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·:
1. æŸ¥çœ‹ README å’Œæ–‡æ¡£
2. æœç´¢å·²æœ‰ Issues
3. åˆ›å»ºæ–°çš„ Issue

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ é¡¹ç›®ï¼Œç®€åŒ–äº†åŸå§‹ NanoClaw çš„è®¸å¤šåŠŸèƒ½ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨åŸå§‹å®ç°ã€‚
